---
layout: post
title: "Constructions involving quasicoherent sheaves"
date: 2025-8-18 12:00:00 -0400
blurb: "A look at an example post using Bay Jekyll theme."
og\_image: /assets/img/content/post-example/Banner.jpg
math: true
---

A <a href="https://math.stackexchange.com/questions/5000917/is-sheafification-required-on-the-distinguished-affine-base-for-constructions-in" target="\_blank">question I have had</a> for some time is the following.

If \\(X\\) is a scheme and \\(\mathcal{F}\_{\alpha}\\) are some sheaves on \\(X\\), then we can often define some sheaf \\(\mathcal{F}\\) on \\(X\\) to be constructed by sheafifying some presheaf constructed out of the \\(\mathcal{F}\_{\alpha}\\). For instance, for \\(\mathcal{O}\_X\\)-modules \\(\mathcal{F}\_1\\) and \\(\mathscr{F}\_2\\), we can construct the tensor product sheaf \\(\mathcal{F}\_1\otimes\mathcal{F}\_2\\) to be the sheafification of the presheaf \\(U\mapsto\mathcal{F}\_1(U)\otimes\_{\mathcal{O}\_X(U)}\mathcal{F}\_2\\). However, if \\(\mathcal{F}\_1\\) and \\(\mathcal{F}\_2\\) are quasicoherent, this sheafification is redundant on affine open subsets as we will have \\((\mathcal{F}\_1\otimes\mathcal{F}\_1)(U)\cong\mathcal{F}\_1(U)\otimes\_{\mathcal{O}\_X(U)}\mathcal{F}\_2(U)\\) for every affine open subset \\(U\subseteq X\\). In fact, Vakil claims that this phenomenon holds more generally:

> Note that thanks to the machinery behind the distinguished affine base, sheafification is taken care of. This is a feature we will use often: constructions involving quasicoherent sheaves that involve sheafification for general sheaves donâ€™t require sheafification when considered on the distinguished affine base.

My question is: exactly what type of constructions involving quasicoherent sheaves satisfy this principle and why?

Let us make the situation more precise. Let \\(\mathcal{F}\_1,\mathcal{F}\_2,\dots,\mathcal{F}\_n\\) be quasicoherent sheaves on \\(X\\). Also for any ring \\(R\\), let \\(\Psi^R\colon (R\operatorname{-\mathsf{Mod}})^n\to R\operatorname{-\mathsf{Mod}}\\) be a multifunctor. This family of multifunctors captures the exact algebraic "construction" that we are performing locally to build a new presheaf out of the \\(\mathcal{F}\_i\\). For instance, in the example described above \\(\Psi^R\\) was the bifunctor given by the tensor product over \\(R\\).

More generally, we can define the presheaf \\(\mathcal{F}\_{\Psi}\\) given by \\(U\mapsto\Psi^{\mathcal{O}\_X(U)}((\mathcal{F}\_1(U),\mathcal{F}\_2(U),\dots,\mathcal{F}\_n(U)))\\). Notice that for any open subsets \\(V\\) and \\(U\\) with \\(V\subseteq U\\), we have that the restriction map of the structure sheaf \\(\rho\_{U,V}^{\mathcal{O}\_X}\colon\mathcal{O}\_X(U)\to\mathcal{O}\_X(V)\\) is a ring homomorphism which endows \\(\mathcal{F}\_{\Psi}(V)\\) the structure of an \\(\mathcal{O}\_X(U)\\)-module via restriction of scalars. Hence, we may interpret each restriction map \\(\rho\_{U,V}^{\mathcal{F}\_i}\\) as an \\(\mathcal{O}\_X(U)\\)-module homomorphism. Therefore, we may define the restriction maps of \\(\mathcal{F}\_{\Psi}\\) to be \\(\Psi^{\mathcal{O}\_X(U)}((\rho\_{U,V}^{\mathcal{F}\_1},\rho\_{U,V}^{\mathcal{F}\_2},\dots,\rho\_{U,V}^{\mathcal{F}\_n}))\\).

This multifunctor formalism is not quite necessary and not really all-encompassing. More generally, we just need to associate to every tuple \\((\mathcal{F}\_1(U),\mathcal{F}\_2(U),\dots,\mathcal{F}\_n(U))\\) an \\(\mathcal{O}\_X(U)\\)-module \\(\Psi^{\mathcal{O}\_X(U)}((\mathcal{F}\_1(U),\mathcal{F}\_2(U),\dots,\mathcal{F}\_n(U)))\\), and to each inclusion of open subsets \\(V\subseteq U\\), we need restriction maps \\(\rho\_{U,V}^{\mathcal{F}\_{\Psi}}\\) that satisfy the appropriate axioms for restriction maps in presheaves. This subsumes the multifunctor formalism and allows for additional constructions like quotients. Even though such a thing may no longer strictly be a multifunctor, we still insist on interpreting the data of \\(\Psi\\) as an "operation on modules".

The question we are now asking is when the sheafification of \\(\mathcal{F}\_{\Psi}\\) is redundant on the affine subsets. That is, what condition should be placed on \\(\Psi\\) so that \\(\mathcal{F}\_{\Psi}(U)\cong\mathcal{F}\_{\Psi}^{\\#}(U)\\) for every affine subset \\(U\subseteq X\\)? Moreover, why is the quasicoherence of the \\(\mathcal{F}\_i\\) important?

**Theorem:** Let \\(X\\) be a scheme. Let \\(\mathcal{F}\_1,\mathcal{F}\_2,\dots,\mathcal{F}\_n\\) be quasicoherent sheaves on \\(X\\). For any ring \\(R\\) let \\(\Psi^R\\) be an operation on \\(R\\)-modules. Suppose for every affine subset \\(U\subseteq X\\) we have an isomorphism \\(L\_U\\) of \\(\mathcal{O}\_X(U)\\)-modules that makes the following diagram commute for every \\(f\in\mathcal{O}\_X(U)\\):
<div style="text-align: center;">
<img src="/bay/myassets/images/2025-8-18-Constructions-involving-quasicoherent-sheaves/dia2.png" alt="Corona discharge" width="450px">
</div>
where \\(\phi\_f^{\mathcal{O}\_X(U)}\\) is the canonical localization map and \\(Q\_f^U\\) is the isomorphism induced by the quasicoherence of the \\(\mathcal{F}\_i\\). Then for every affine subset \\(U\\) we will have
\\[\mathcal{F}\_{\Psi}(U)\cong\mathcal{F}\_{\Psi}^{\\#}(U).\\]

_Proof_: The quasicoherence of the \\(\mathcal{F}\_i\\) induces the isomorphism \\(Q\_f^U\\) while the isomorphism \\(L\_U\\) should be interpreted as the property that the operation \\(\Psi\\) commutes with localization. Together, these two maps imply that the restriction of \\(\mathcal{F}\_{\Psi}\\) to any affine subset \\(U\cong\operatorname{Spec}{R}\\) and its distinguished affine subsets is a module sheaf on the distinguished affine base of \\(U\\). Hence \\(\mathcal{F}\_{\Psi}\\) on the distinguished affine base is actually already the restriction of a quasicoherent sheaf.

To see this, observe that for \\(U\cong\operatorname{Spec}{R}\\) affine and any distinguished \\(D(f)\subseteq U\\) we have \\(D(f)\cong\operatorname{Spec}{R\_f}\\) and by the commutativity condition above, we have \\(\mathcal{F}\_{\Psi}(D(f))\cong\mathcal{F}\_{\Psi}(U)\_f\\) via \\(L\_U\circ Q\_f^U\\). Moreover, if \\(D(g)\subseteq D(f)\subseteq U\\) then \\(\mathcal{O}\_X(D(g))\\) is isomorphic to a localization of \\(\mathcal{O}\_X(D(f))\\), and by our commutativity condition we can see that the isomorphism \\(L\_{D(f)}\\) provides compatibility between the restriction map \\(\rho\_{D(f),D(g)}^{\mathcal{F}\_{\Psi}}\\) and the localization map \\(\phi\_{g/1}^{\mathcal{O}\_X(D(f))}\\).

Hence \\(\mathcal{F}\_{\Psi}\\) has the same restriction as the module sheaf \\(\widetilde{\mathcal{F}\_{\Psi}(U)}\\) on the distinguished affine base of \\(U\cong\operatorname{Spec}{R}\\). In particular, \\(\mathcal{F}\_{\Psi}\\), while being just a presheaf, enjoys the gluing and identity properties on the affine base! (The gluing follows from the "partition of unity" argument in section 4.1 of Vakil). With this in mind, we can now construct an isomorphism \\(\Lambda\colon\mathcal{F}\_{\Psi}^{\\#}(U)\to\mathcal{F}\_{\Psi}(U).\\)

Let \\((f\_p)\_{p\in U}\\) be an element of \\(\mathcal{F}\_{\Psi}^{\\#}\\). By the definition of sheafification and the quasicompactness of \\(U\\), we know that there are finitely many affine subsets \\(D(f\_1),D(f\_2),\dots,D(f\_r)\\) covering \\(U\\) such that \\(f\_q=s\_q^i\\) for all \\(q\in D(f\_i)\\) for some \\(i\\) and \\(s^i\in\mathcal{F}\_{\Psi}(D(f\_i))\\). Note that at any point in an overlap \\(q\in D(f\_i)\cap D(f\_j)\\), we certainly \\(s\_q^i=f\_q=s\_q^j\\). Moreover, the overlap can be covered with affine subsets that are simultaneously distinguished in both \\(D(f\_i)\\) and \\(D(f\_j)\\). It follows by the base gluing and identity properties of \\(\mathcal{F}\_{\Psi}\\) that \\(s^i\\) and \\(s^j\\) agree on the overlap. It follows from base gluing again that the \\(s^i\\) glue to some section \\(s\in\mathcal{F}\_{\Psi}(U)\\). We define \\(\Lambda((f\_p)\_{p\in U})=s\\). This is certainly a homomorphism of \\(\mathcal{O}\_X(U)\\)-modules. Also note that this is injective by construction since the germ of \\(s\\) at any \\(p\in U\\) is \\(f\_p\\). It is clearly also surjective, since any \\(s=\Lambda((s\_p)\_{p\in U})\\) for all \\(s\in\mathcal{F}\_{\Psi}\\). This completes the proof. \\(\square\\)